/*!
 * Jusfoun D3.js Chart Library v0.1.0
 * Powered by Jusfoun Visualization Department
 * Contact: 
 *   vd@jusfoun.com
 *   http://vd.jusfoun.com
 * 
 * Copyright (c) 2017, Jusfoun Big Data Group Inc.
 * All rights reserved.
 * 
 * LICENSE
 * http://www.jusfoun.com/software/LICENSE.txt
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ChartLib",[],e):"object"==typeof exports?exports.ChartLib=e():t.ChartLib=e()}(this,function(){return function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=a(2),u=function(t){function e(t){i(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));a._id=void 0,a._domElement=void 0,a._svg=void 0;var n=a;n._id="auto_id_"+Math.round(16777215*Math.random())+"_"+Math.round(16777215*Math.random());var o=(0,l.createElement)("div");n._domElement=o;var u=(0,l.createElementNS)(l.SVG_NS,"svg");return n._svg=u,(0,l.setAttributes)(u,{version:"1.1",xmlns:l.SVG_NS,"xmlns:xlink":l.XLINK_NS}),o.appendChild(u),a}return n(e,t),o(e,[{key:"resize",value:function(t,e){var a=this;a.width=t||a.width,a.height=e||a.height}},{key:"capture",value:function(t,e){}},{key:"updateDisplayList",value:function(){var t=this,e=t._domElement,a=e.parentElement,i=t._width;!i&&a&&(i=a.clientWidth),i+="";var r=t._height;!r&&a&&(r=a.clientHeight),r+="";var n=/[\D]+$/gi;(0,l.setStyles)(e,{width:n.test(i)?i:i+"px",height:n.test(r)?r:r+"px"}),(0,l.setAttributes)(t._svg,{width:i,height:r,viewBox:[0,0,i,r].join(" ")})}},{key:"domElement",get:function(){return this._domElement}}]),e}(l.UiComponent);e.default=u},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.GraphUtil=e.PolarGroupedBranchChart=e.D3Base=void 0;var r=a(0),n=i(r),o=a(3),l=i(o),u=a(5),s=i(u);e.D3Base=n.default,e.PolarGroupedBranchChart=l.default,e.GraphUtil=s.default},function(t,e,a){/*!
 * Jusfoun Common Library v0.1.6
 * Powered by Jusfoun Visualization Department
 * Contact: 
 *   vd@jusfoun.com
 *   http://vd.jusfoun.com
 * 
 * Copyright (c) 2017, Jusfoun Big Data Group Inc.
 * All rights reserved.
 * 
 * LICENSE
 * http://www.jusfoun.com/software/LICENSE.txt
 */
!function(e,a){t.exports=a()}(0,function(){return function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=function(t,e){Object.defineProperty(t,"target",{configurable:!0,enumerable:!0,get:function(){return e},set:void 0})},o=function(){function t(e){i(this,t),this._target=e}return r(t,[{key:"addEventListener",value:function(t,e,a){var i=this;if(!t||"function"!=typeof e)throw new Error("Illegal parameters.");var r=i._mapKTypeVListenerTokens;void 0==r&&(r=i._mapKTypeVListenerTokens={});var n=r[t];void 0==n&&(n=r[t]=[]);var o={listener:e,thisArg:a};n.push(o)}},{key:"removeEventListener",value:function(t,e){var a=this;if(!t||"function"!=typeof e)throw new Error("Illegal parameters.");var i=a._mapKTypeVListenerTokens;if(void 0!=i){var r=i[t];if(void 0!=r){for(var n=[],o=0;o<r.length;o++){var l=r[o];l.listener==e&&(n.push(o),delete l.listener,delete l.thisArg)}for(var u=n.length-1;u>=0;u--)r.splice(n[u],1);r.length<1&&delete i[t]}}}},{key:"removeEventListeners",value:function(t){var e=this,a=e._mapKTypeVListenerTokens;if(void 0!=a)if(void 0==t)for(var i in a)a.hasOwnProperty(i)&&e.removeEventListeners(i);else{var r=a[t];if(void 0==r)return;for(var n=0;n<r.length;n++){var o=r[n];delete o.listener,delete o.thisArg}delete a[t]}}},{key:"hasEventListener",value:function(t,e){var a=this;if(!t)throw new Error("Illegal parameters.");var i=a._mapKTypeVListenerTokens;if(void 0==i)return!1;var r=i[t];if(void 0==e)return void 0!=r;for(var n=0;n<r.length;n++)if(r[n].listener==e)return!0;return!1}},{key:"dispatchEvent",value:function(t){var e=this;if(!t||!t.type)throw new Error("Illegal parameter event: "+t);var a=e._mapKTypeVListenerTokens;if(void 0!=a){var i=a[t.type];if(void 0!=i){n(t,e._target||e);for(var r=0;r<i.length;r++){var o=i[r];o.listener.call(o.thisArg,t)}}}}},{key:"on",value:function(t,e,a){this.addEventListener(t,e,a)}},{key:"off",value:function(t,e){var a=this;"function"==typeof e?a.removeEventListener(t,e):a.removeEventListeners(t)}},{key:"fire",value:function(t){this.dispatchEvent(t)}}]),t}();e.default=o},function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=a(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),s=function(t){function e(t,a){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._intervalId=void 0,n._requestAnimationFrameFlag=!1,n._requestAnimationFrameCount=0,n._delay=void 0,n._repeatCount=0,n._currentCount=0;var o=n;return o._setIntervalHandler=o._setIntervalHandler.bind(o),o._requestAnimationFrameHandler=o._requestAnimationFrameHandler.bind(o),o.delay=t,o.repeatCount=a||0,n}return n(e,t),o(e,[{key:"_setIntervalHandler",value:function(){this._run()}},{key:"_requestAnimationFrameHandler",value:function(){var t=this;1==t._requestAnimationFrameCount&&t._run(),t._requestAnimationFrameCount<1&&t._requestAnimationFrameCount++,t._requestAnimationFrameFlag&&requestAnimationFrame(t._requestAnimationFrameHandler)}},{key:"_run",value:function(){var t=this;if(0!=t._repeatCount&&t._currentCount>=t._repeatCount)return t.stop(),void t.fire({type:"timerComplete"});t._currentCount++,t.fire({type:"timer"})}},{key:"reset",value:function(){var t=this;t.stop(),t._currentCount=0}},{key:"start",value:function(){var t=this;t.running||(-4132==t._delay&&"function"==typeof requestAnimationFrame?(t._requestAnimationFrameFlag=!0,requestAnimationFrame(t._requestAnimationFrameHandler)):t._delay>0&&(t._intervalId=setInterval(t._setIntervalHandler,t._delay)))}},{key:"stop",value:function(){var t=this;t.running&&(clearInterval(t._intervalId),t._intervalId=void 0,t._requestAnimationFrameFlag=!1,t._requestAnimationFrameCount=0)}},{key:"delay",get:function(){return this._delay},set:function(t){var e=this;if(e._delay!=t){if(isNaN(t)||!isFinite(t)||t<=0&&-4132!=t)throw new Error("Illegal delay value: "+t);return e._delay=t,e.running&&(e.stop(),e.start()),e}}},{key:"repeatCount",get:function(){return this._repeatCount},set:function(t){var e=this;if(e._repeatCount!=t){if(isNaN(t)||!isFinite(t)||t<0)throw new Error("Illegal repeat count value: "+t);return e._repeatCount=t,e}}},{key:"currentCount",get:function(){return this._currentCount}},{key:"running",get:function(){var t=this;return void 0!=t._intervalId||t._requestAnimationFrameFlag}}]),e}(u.default);s.REQUEST_ANIMATION_FRAME=-4132,e.default=s},function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=a(1),o=function(t){return t&&t.__esModule?t:{default:t}}(n),l=function(){function t(){i(this,t),this._timer=null,this._invalidatePropertiesQueue=[],this._invalidatePropertiesFlag=!1,this._invalidateSizeQueue=[],this._invalidateSizeFlag=!1,this._invalidateDisplayListQueue=[],this._invalidateDisplayListFlag=!1;var e=this;e._timer=new o.default(o.default.REQUEST_ANIMATION_FRAME,1),e._timer.on("timerComplete",e._timerCompleteHandler,e)}return r(t,[{key:"_timerCompleteHandler",value:function(t){var e=this;e._invalidatePropertiesFlag&&e._validateProperties(),e._invalidateSizeFlag&&e._validateSize(),e._invalidateDisplayListFlag&&e._validateDisplayList()}},{key:"invalidateProperties",value:function(t){var e=this;t&&"function"==typeof t.validateProperties&&(e._invalidatePropertiesQueue.push(t),e._invalidatePropertiesFlag=!0,e._timer.running||e._timer.start())}},{key:"invalidateSize",value:function(t){var e=this;t&&"function"==typeof t.validateSize&&(e._invalidateSizeQueue.push(t),e._invalidateSizeFlag=!0,e._timer.running||e._timer.start())}},{key:"invalidateDisplayList",value:function(t){var e=this;t&&"function"==typeof t.validateDisplayList&&(e._invalidateDisplayListQueue.push(t),e._invalidateDisplayListFlag=!0,e._timer.running||e._timer.start())}},{key:"validateClient",value:function(t){if(!t)throw new Error("Target is NULL.");"function"==typeof t.validateProperties&&t.validateProperties(),"function"==typeof t.validateSize&&t.validateSize(),"function"==typeof t.validateDisplayList&&t.validateDisplayList()}},{key:"_validateProperties",value:function(){for(var t=this;t._invalidatePropertiesQueue.length>0;)t._invalidatePropertiesQueue.pop().validateProperties();t._invalidatePropertiesFlag=!1}},{key:"_validateSize",value:function(){for(var t=this;t._invalidateSizeQueue.length>0;)t._invalidateSizeQueue.pop().validateSize();t._invalidateSizeFlag=!1}},{key:"_validateDisplayList",value:function(){for(var t=this;t._invalidateDisplayListQueue.length>0;)t._invalidateDisplayListQueue.pop().validateDisplayList();t._invalidateDisplayListFlag=!1}}]),t}();e.default=l},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UiComponent=e.LayoutManager=e.Timer=e.EventDispatcher=void 0;var r=a(4);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var n=a(0),o=i(n),l=a(1),u=i(l),s=a(2),d=i(s),c=a(5),f=i(c);e.EventDispatcher=o.default,e.Timer=u.default,e.LayoutManager=d.default,e.UiComponent=f.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return document.createElement.apply(document,arguments)},r=function(){return document.createElementNS.apply(document,arguments)},n=function(t,e,a){return a?t.getAttributeNS(a,e):t.getAttribute(e)},o=function(t,e,a){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i]+"";a?t.setAttributeNS(a,i,r):t.setAttribute(i,r)}},l=function(t,e){for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];-1!=a.indexOf("-")&&(a=a.replace(/\-([\w]+?)/g,function(){return arguments[1].toUpperCase()})),t.style[a]=i+""}};e.XHTML_NS="http://www.w3.org/1999/xhtml",e.SVG_NS="http://www.w3.org/2000/svg",e.XLINK_NS="http://www.w3.org/1999/xlink",e.createElement=i,e.createElementNS=r,e.getAttribute=n,e.setAttributes=o,e.setStyles=l},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),u=a(0),s=i(u),d=a(2),c=i(d),f=new c.default,p=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._invalidatePropertiesFlag=!1,t._invalidateSizeFlag=!1,t._invalidateDisplayListFlag=!1,t._layoutManager=f,t._x=0,t._y=0,t._width=0,t._height=0,t}return o(e,t),l(e,[{key:"initialize",value:function(){}},{key:"invalidateProperties",value:function(){var t=this;t._invalidatePropertiesFlag||(t._invalidatePropertiesFlag=!0,(t._layoutManager||f).invalidateProperties(t))}},{key:"invalidateSize",value:function(){var t=this;t._invalidateSizeFlag||(t._invalidateSizeFlag=!0,(t._layoutManager||f).invalidateSize(t))}},{key:"invalidateDisplayList",value:function(){var t=this;t._invalidateDisplayListFlag||(t._invalidateDisplayListFlag=!0,(t._layoutManager||f).invalidateDisplayList(t))}},{key:"validateNow",value:function(){(this._layoutManager||f).validateClient(this)}},{key:"validateProperties",value:function(){var t=this;t._invalidatePropertiesFlag&&(t.commitProperties(),t._invalidatePropertiesFlag=!1)}},{key:"validateSize",value:function(){var t=this;t._invalidateSizeFlag&&(t.measure(),t._invalidateSizeFlag=!1)}},{key:"validateDisplayList",value:function(){var t=this;t._invalidateDisplayListFlag&&(t.updateDisplayList(),t._invalidateDisplayListFlag=!1)}},{key:"commitProperties",value:function(){}},{key:"measure",value:function(){}},{key:"updateDisplayList",value:function(){}},{key:"setStyle",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){var e=this;e._x!=t&&(e._x=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}},{key:"y",get:function(){return this._y},set:function(t){var e=this;e._y!=t&&(e._y=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}},{key:"width",get:function(){return this._width},set:function(t){var e=this;e._width!=t&&(e._width=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}},{key:"height",get:function(){return this._height},set:function(t){var e=this;e._height!=t&&(e._height=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}}]),e}(s.default);e.default=p}])})},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),u=a(0),s=i(u),d=a(4),c=i(d),f=function(t,e){!function t(a,i){e(a,i);var r=a.children;r instanceof Array&&r.length>0&&r.forEach(function(e){t(e,a)})}(t)},p=function(t,e){for(var a=t,i=t.parent;i;)e(i,a),a=i,i=i.parent},v=6.283185307179586,h=.017453292519943295,_=function(t){function e(t){r(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a._data=void 0,a._position=void 0,a._spaceRadius=void 0,a._invalidateDataFlag=!1,a._invalidateSpaceFlag=!1,a._d3Svg=void 0,a._d3MainGroup=void 0,a._d3Control=void 0,a._d3Tree=void 0,a._d3Vertices=void 0,a._d3Edges=void 0,a._d3SelectedItem=void 0;var i=a;i._initDefs();var o=d3.select(i._svg);i._d3Svg=o;var l=o.append("g").attr("class","main");return i._d3MainGroup=l,i._d3Control=(0,c.default)(o).scaleExtent([.25,8]).duration(0).on("zoom",function(){l.attr("transform",d3.event.transform)}),i._d3Tree=d3.tree().size([1,1]).separation(function(t,e){return 1}),a}return o(e,t),l(e,[{key:"setPosition",value:function(t,e){this.position={x:t,y:e}}},{key:"_initDefs",value:function(){var t=this,e=t._id,a=d3.select(t._svg),i=a.append("defs");i.append("filter").attr("id",e+"_filter_blur_1").attr("x",-50).attr("y",-50).attr("width",100).attr("height",100).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",6),i.append("filter").attr("id",e+"_filter_blur_2").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",3);var r=i.append("linearGradient").attr("id",e+"_linear_gradient_1").attr("x1","100%").attr("y1","100%").attr("x2","0%").attr("y2","0%");r.append("stop").attr("offset","0%").attr("style","stop-color: #a4c9ff; stop-opacity: 1;"),r.append("stop").attr("offset","100%").attr("style","stop-color: #14467d; stop-opacity: 0.85;");var n=i.append("linearGradient").attr("id",e+"_linear_gradient_2").attr("x1","100%").attr("y1","100%").attr("x2","0%").attr("y2","0%");n.append("stop").attr("offset","0%").attr("style","stop-color: #de561e; stop-opacity: 1;"),n.append("stop").attr("offset","100%").attr("style","stop-color: #ffa289; stop-opacity: 0.85;")}},{key:"_calculatePosition",value:function(t,e,a){if(0==t.depth)return{x:0,y:0};isNaN(e)&&(e=1),isNaN(a)&&(a=1);var i=this,r=i._spaceRadius;isNaN(r)&&(r=i._spaceRadius=Math.min(i._width,i._height)/2);var n=t._angle*e,o=t.y*a*(i._spaceRadius-130);return{x:Math.cos(n)*o,y:Math.sin(n)*o}}},{key:"_drawTestPolar",value:function(){var t=this,e=t._data,a=t._d3MainGroup,i=(t._d3Control,t._d3Tree),r=i(d3.hierarchy(e,function(t){return t.children})),n=[],o={};f(r,function(t,e){if(0!=t.depth){t.depth>1&&(t.data.group=e.data.group);var a=t.depth,i=t.data.group,r=o[i];r||(r={id:i,mapDepthInfo:{},listDepthInfo:[]},o[i]=r,n.push(r));var l=r.mapDepthInfo[a];l||(l={depth:a,minX:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,vertices:[]},r.mapDepthInfo[a]=l,r.listDepthInfo.push(l)),t.x<l.minX&&(l.minX=t.x),t.x>l.maxX&&(l.maxX=t.x),l.vertices.push(t)}});var l=v-.5235987755982988*n.length,u=100*h;n.forEach(function(t){delete t.mapDepthInfo,t.listDepthInfo.forEach(function(t){t.vertices.forEach(function(t){t._percent=t.x,t._angle=u+t._percent*l})}),u+=.5235987755982988});var s=r.descendants(),d=r.links();t._position||t.setPosition(t._width/2,t._height/2),a.selectAll(".edge").attr("class",".edge-removing").transition().duration(200).delay(function(t,e){return 100+2*e}).tween("edge.disappear",function(t){var e=this;return function(t){e.style.opacity=1-t}}).on("end",function(){d3.select(this).remove()});var c=a.selectAll(".edge").data(d).enter().append("g").attr("class","edge").attr("data-source",function(t){return t.source.data.id}).attr("data-target",function(t){return t.target.data.id}).each(function(e){var a=d3.select(this);t._drawEdge(e,a)});t._d3Edges=c,a.selectAll(".vertex").attr("class",".vertex-removing").transition().duration(200).delay(function(t,e){return 2*e}).tween("vertex.disappear",function(t){var e=this;return function(t){e.style.opacity=1-t}}).on("end",function(){d3.select(this).remove()});var p=a.selectAll(".vertex").data(s).enter().append("g").attr("class","vertex").attr("data-id",function(t){return t.data.id}).each(function(e){var a=d3.select(this);0==e.depth?a.attr("is-root",1):a.attr("data-group",e.data.group),t._drawVertex(e,a),t._updateVertexState(e,a)});t._d3Vertices=p,p.style("opacity",0).transition().duration(1e3).delay(function(t,e){return 5*e}).tween("vertex.appear",function(e){var a=this;return function(i){var r=t._calculatePosition(e,i);a.setAttribute("transform",["translate(",r.x,",",r.y,")"].join("")),a.style.opacity=i}});var _=5*p.size();c.style("opacity",0).transition().duration(1e3).delay(function(t,e){return _+5*e}).tween("edge.appear",function(t){var e=this;return function(t){e.style.opacity=t}}),_+=5*c.size(),a.transition().duration(500).delay(_).on("end",function(){f(r,function(e){e.depth>1&&(e._blur=!0,t._updateVertexState(e))})})}},{key:"_drawVertex",value:function(t,e){e=e||d3.select('.vertex[data-id="'+t.data.id+'"]');var a=this,i=function(){a.fire({type:"itemClick",data:t.data})},r=function(){var e=a._d3SelectedItem;e&&(e._selected=!1,e._highlight=!1,e._updateSelectionState=!0,e._updateRelationState=!0,e.depth>1&&(e._blur=!0),a._updateVertexState(e),a._d3SelectedItem=null,e==t)||(a._d3SelectedItem=t,t._selected=!t._selected,t._highlight=!0,t._updateSelectionState=!0,t._updateRelationState=!0,a._updateVertexState(t,d3.select(this)))},n=function(){a.fire({type:"itemExpand",data:t.data,expanded:t._selected})},o=function(){t._highlight=!1,t._updateRelationState=!0,a._updateVertexState(t,d3.select(this))},l=function(){t._highlight=!0,t._updateRelationState=!0,a._updateVertexState(t,d3.select(this))};if(0==t.depth)e.append("image").attr("class","background").attr("x",-210.5).attr("y",-210.5).attr("href","./static/image/depth-0-vertex-normal.png"),e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","16").attr("font-weight","bold").attr("fill","#FFF").text(function(t){return t.data.name}),e.append("circle").attr("class","button").attr("fill","#FFF").attr("opacity",0).attr("cx","0").attr("cy","0").attr("r","36").style("cursor","pointer").on("mouseout",function(){o.call(this.parentNode)}).on("mouseover",function(){l.call(this.parentNode)}).on("click",function(){i()});else{var u=t.children;if(u instanceof Array&&u.length>0){e.append("rect").attr("class","background").attr("width","100").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("fill","#013077").attr("stroke","#6389c2"),e.append("rect").attr("class","halo").attr("width","100").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("visibility","hidden").attr("fill","#ff7655");e.append("image").attr("class","expand-icon").attr("y",-12.5).attr("href","./static/image/depth-1-vertex-normal.png").on("click",function(){r.call(this.parentNode),n()});e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","12").attr("font-weight","bold").attr("fill","#FFF").text(function(t){return t.data.name}).on("click",function(){i()})}else e.append("rect").attr("class","background").attr("width","88").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("opacity",.6).attr("visibility","hidden").attr("fill","#fd6b41"),e.append("rect").attr("class","halo").attr("width","112").attr("height","38").attr("rx","19").attr("ry","19").attr("y",-19).attr("opacity",.1).attr("visibility","hidden").attr("fill","#fd6b41"),e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","12").attr("font-weight","bold").attr("fill","#FFF").text(function(t){return t.data.name}),e.append("circle").attr("class","dot").attr("cx",0).attr("cy",0).attr("r",4).attr("fill","#fd6541").attr("stroke","#fd6541"),e.on("click",function(){r.call(this),i()});e.style("cursor","pointer").on("mouseout",o).on("mouseover",l)}}},{key:"_updateVertexState",value:function(t,e){e=e||d3.select('.vertex[data-id="'+t.data.id+'"]');var a=this,i=t._highlight;if(t._selected&&(t._highlight=!0),e.attr("transform",function(t){var e=a._calculatePosition(t);return["translate(",e.x,",",e.y,")"].join("")}),0==t.depth)e.select(".background").attr("href",t._highlight?"./static/image/depth-0-vertex-emphasis.png":"./static/image/depth-0-vertex-normal.png");else{var r=t.children,n=(t._angle+1.5707963267948966)%v<3.141592653589793;if(r instanceof Array&&r.length>0){var o=e.select(".label"),l=o.node().getBBox(),u=25+l.width+15;o.attr("x",(25+l.width/2)*(n?1:-1)),e.select(".background").attr("width",u).attr("x",n?0:-u).attr("fill",t._highlight?"#fd6541":"#013077").attr("stroke",t._highlight?"#fd6541":"#6389c2"),e.select(".halo").attr("width",u).attr("x",n?0:-u).attr("filter",t._highlight?["url(#",a._id,"_filter_blur_1)"].join(""):"").attr("visibility",t._highlight?"visible":"hidden"),e.select(".expand-icon").attr("x",(n?5:-5)-12).attr("href",t._highlight?"./static/image/depth-1-vertex-emphasis.png":"./static/image/depth-1-vertex-normal.png")}else{var s=e.select(".label"),d=s.node().getBBox(),c=5+d.width+5,h=c+20;s.attr("x",(5+d.width/2+10)*(n?1:-1)).attr("fill",t._highlight?"#FFF":"#35508d"),e.select(".background").attr("width",c).attr("x",n?10:-(c+10)).attr("visibility",t._highlight?"visible":"hidden"),e.select(".halo").attr("width",h).attr("x",n?0:-h).attr("visibility",t._highlight?"visible":"hidden"),e.select(".dot").attr("fill",t._highlight?"#fd6541":"#013077").attr("stroke",t._highlight?"#fd6541":"#6389c2"),t.depth>1&&(t._selected&&(t._blur=!1),e.attr("filter",t._blur?["url(#",a._id,"_filter_blur_2)"].join(""):"").attr("opacity",t._blur?.6:1))}}var _=t._updateSelectionState;t._updateSelectionState=!1;var y=t._updateRelationState;t._updateRelationState=!1,y&&(p(t,function(e,r){_&&(e._selected=t._selected),e._highlight=i,e._updateRelationState=!1,a._updateVertexState(e);var n=d3.select(['.edge[data-source="',e.data.id,'"][data-target="',r.data.id,'"]'].join("")),o=n.datum();o._highlight=i,_&&(o._selected=t._selected),a._updateEdgeState(o,n)}),f(t,function(e,r){if(e!=t){_&&(e._selected=t._selected),e.depth>1&&(e._blur=!e._selected),e._highlight=i,e._updateRelationState=!1,a._updateVertexState(e);var n=d3.select(['.edge[data-source="',r.data.id,'"][data-target="',e.data.id,'"]'].join("")),o=n.datum();o._highlight=i,_&&(o._selected=t._selected),a._updateEdgeState(o,n)}}))}},{key:"_drawEdge",value:function(t,e){var a=this,i=a._calculatePosition(t.source),r=a._calculatePosition(t.target);e.append("line").attr("class","line").attr("x1",i.x).attr("y1",i.y).attr("x2",r.x).attr("y2",r.y).attr("stroke",["url(#",a._id,"_linear_gradient_1)"].join(""))}},{key:"_updateEdgeState",value:function(t,e){e=e||d3.select(['.edge[data-source="',t.source.data.id,'"][data-target="',t.target.data.id,'"]'].join(""));var a=this,i=a._id;t._selected&&(t._highlight=!0),e.select(".line").attr("stroke",t._highlight?["url(#",i,"_linear_gradient_2)"].join(""):["url(#",i,"_linear_gradient_1)"].join(""))}},{key:"commitProperties",value:function(){var t=this;t._invalidateDataFlag&&(t._invalidateDataFlag=!1,t._drawTestPolar()),t._invalidateSpaceFlag&&(t._invalidateSpaceFlag=!1,t._d3Vertices.attr("transform",function(e){var a=t._calculatePosition(e);return["translate(",a.x,",",a.y,")"].join("")}),t._d3Edges.each(function(e){t._updateEdgeState(e,d3.select(this))}))}},{key:"data",get:function(){return this._data},set:function(t){var e=this;e._data=t,e._invalidateDataFlag=!0,e.invalidateProperties()}},{key:"spaceRadius",get:function(){return this._spaceRadius},set:function(t){var e=this;e._spaceRadius=t,e._invalidateSpaceFlag=!0,e.invalidateProperties()}},{key:"position",get:function(){return this._position},set:function(t){var e=this;e._position=t,e._d3Control.translate(e._d3MainGroup,e._position.x,e._position.y)}}]),e}(s.default);e.default=_},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){var e=0,a=!1,i=0,r=0,n={x:0,y:0},o={x:0,y:0},l=d3.zoom().on("start.internal",function(){}).on("end.internal",function(){a=!1,i=0,r=0}).on("zoom.internal",function(){var t=d3.touches(this);if(t&&t.length>1){if(!a){a=!0;var l=t[0][0]-t[1][0],u=t[0][1]-t[1][1];i=Math.atan2(l,u),r=e}var s=t[0][0]-t[1][0],d=t[0][1]-t[1][1],c=i-Math.atan2(s,d);e=r+c,d3.event.rotation=e,n.x=(t[0][0]+t[1][0])/2,n.y=(t[0][1]+t[1][1])/2}else d3.event.rotation=e;a&&(d3.event.transform.x=n.x,d3.event.transform.y=n.y),d3.event&&d3.event.transform&&(o.x=d3.event.transform.x,o.y=d3.event.transform.y)});return l.translate=function(t,e,a){l.transform(t,function(){var t=this;return t.__zoom.x=e,t.__zoom.y=a,t.__zoom})},t.call(l),l};e.default=i},function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=function(){function t(){i(this,t)}return r(t,null,[{key:"toTreeData",value:function(t,e,a){a=a||{};var i=a.vertexIdField||"id",r=a.edgeSourceIdField||"source",n=a.edgeTargetIdField||"target",o=a.childrenField||"children",l="_vertexInfo_"+Math.round(4294967295*Math.random()),u={},s=[],d=[];if(e instanceof Array&&e.forEach(function(t){var e={id:t[i],visited:!1,inDegree:0,outDegree:0};t[l]=e,t[o]=[],u[e.id]=t,s.push(t)}),!(t instanceof Array))throw new Error("Edge data are required.");if(t.forEach(function(t){var e=t[r],a=u[e];if(!a){a={};var d={id:e,visited:!1,inDegree:0,outDegree:0};a[i]=e,a[l]=d,a[o]=[],u[d.id]=a,s.push(a)}var c=t[n],f=u[t.target];f||(f={},d={id:c,visited:!1,inDegree:0,outDegree:0},f[i]=c,f[l]=d,f[o]=[],u[d.id]=f,s.push(f)),a[l].outDegree++,f[l].inDegree++,a[o].push(f)}),s.forEach(function(t){var e=t[l];delete t[l],0==e.inDegree&&d.push(t)}),0==d.length)throw new Error("It's NOT a tree structure.");if(d.length>1){var c={};return c[i]="auto_root_"+Math.round(16777215*Math.random()),c[o]=d,c}return d[0]}}]),t}();e.default=n}])});
